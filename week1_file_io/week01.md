### 🔹 **基础篇（必练）** — 建立 I/O 感知

#### **练习 1：创建并写入一个新文件**

> 使用 `open()` 或 `creat()` 创建文件 `hello.txt`，写入 `"Hello, Unix!"`。

- 使用：`open(O_CREAT | O_WRONLY | O_TRUNC)` 或 `creat()`
- 用 `write()` 写入
- 最后 `close()`



---

#### **练习 2：读取文件内容并输出**

> 使用 `read()` 读取 `hello.txt` 的内容并通过 `write()` 输出到终端。

- 用 `read()` + `write(STDOUT_FILENO, ...)`
    
- 用 `sizeof(buffer)` 控制读取长度
    

---

#### **练习 3：读取整个文件内容（循环读取）**

> 写一个程序，每次读取 128 字节，直到文件结束，全部输出到屏幕。

- 用 `while ((n = read(...)) > 0)` 模式
    

---

### 🔹 **进阶篇（操作偏移 & 文件控制）**

#### **练习 4：用 `lseek()` 跳过前10字节再读**

> 打开任意文件，跳过前10个字节，从第11字节开始读出10个字节。

- 用 `lseek(fd, 10, SEEK_SET)`
    
- 然后 `read()` 接着读取
    

---

#### **练习 5：获取文件大小**

> 使用 `lseek()` 定位到文件末尾，获取文件总长度并打印。


`off_t size = lseek(fd, 0, SEEK_END);`

---

#### **练习 6：使用 `dup2()` 重定向输出**

> 将 `STDOUT_FILENO` 重定向到一个文件 `log.txt`，然后使用 `printf()` 测试输出是否重定向成功。

- 使用：`dup2(fd, STDOUT_FILENO);`
    

---

### 🔹 **权限与同步篇**

#### **练习 7：使用 `umask()` 设置默认权限**

> 使用 `umask(0)` 和 `umask(022)` 分别创建文件，观察最终权限区别（`ls -l` 查看）。

---

#### **练习 8：写入后使用 `fsync()` 强制刷新**

> 向文件写入一段文本后使用 `fsync()`，确保数据写入磁盘。

`write(fd, "data", 4); fsync(fd);`

---

### 🔹 **挑战篇（组合使用）**

#### **练习 9：文件复制小工具（模拟 cp）**

> 实现一个命令行程序：`mycp source.txt dest.txt`

- 用 `open-read-write-close` 组合
    
- 每次读 512 字节
    
- 检查错误处理和关闭文件
    

---

#### **练习 10：写入稀疏文件（打洞）**

> 使用 `lseek()` 跳过 1GB 写入一个字节，创建一个“空洞文件”。

`int fd = open("sparse.dat", O_WRONLY | O_CREAT, 0644); lseek(fd, 1L << 30, SEEK_SET); write(fd, "X", 1);`

---

## 📦 Bonus 可选练习（扩展理解）

|练习|内容|
|---|---|
|使用 `isatty()` 判断是否是终端||
|写入一个 `int` 数组（非字符串）到文件，再读取||
|将文件从某个偏移开始复制一段内容到另一个文件||

---
