# Unix环境高级编程（第二版）
---

## 🗓️ 学习周期建议
建议 4～5 周完成，每周聚焦一个系统能力主题，并配套动手实践项目。

---

## ✅《Unix环境高级编程 第二版》最小成本学习路线表

| 周次          | 阅读章节（第2版）                                   | 学习目标                                                          | 推荐内容重点                                                                                         | 实战项目建议                                          |
| ----------- | ------------------------------------------- | ------------------------------------------------------------- | ---------------------------------------------------------------------------------------------- | ----------------------------------------------- |
| **第1周**     | 第3章：文件I/O  <br>第4章：文件与目录                    | 掌握低级系统文件读写与文件属性管理，理解 PyTorch Dataset 底层数据访问                   | `open/read/write/close`  <br>`lseek`、`stat/lstat`、`chmod/chown`  <br>文件类型宏：`S_ISREG()` 等       | **日志写入器**：实现追加式日志写入工具，附时间戳和错误处理                 |
| **第2周**     | 第5章：标准I/O库  <br>第8章：进程控制                    | 对比 stdio 与 syscall 的性能差异；掌握 Unix 多进程基本结构，用于训练子进程/任务调度等场景      | `fopen/fread/fwrite` vs `open/read/write`  <br>`fork`, `exec`, `wait/waitpid`, `exit`          | **简易Shell执行器**：用户输入命令，fork 执行，父进程等待退出           |
| **第3周**     | 第10章：信号控制  <br>第13章：守护进程                    | 掌握信号机制，支持训练/部署时优雅退出；掌握后台进程模型                                  | `signal`, `sigaction`, `kill`, `alarm`, `pause`  <br>`setsid`, `chdir`, 屏蔽文件描述符、创建守护进程         | **任务服务 + 信号终止**：支持 Ctrl+C 停止的长时间运行进程，附守护进程化版本   |
| **第4周**     | 第11章：线程  <br>第12章：线程同步  <br>第14章：进程间通信（IPC） | 理解 Python multiprocessing、PyTorch 多进程 dataloader、共享内存通信等的底层原理 | `pthread_create/join`  <br>`mutex`, `condition variable`  <br>`pipe`, `FIFO`, `mmap`, `shmget` | **线程池 + Pipe 日志器**：多个线程完成任务，结果通过 pipe 汇总并输出     |
| **第5周**（选学） | 第16章：Socket 网络编程  <br>第17章：高级 IPC           | 入门服务部署和推理模型通信的基础；理解 socket 通信与 mmap 用法                        | `socket/bind/listen/accept`  <br>`select`, `send/recv`, `inet_ntoa`  <br>`mmap`, `sem_open` 等  | **简易 HTTP 文件服务**：支持并发连接的静态文件服务器（用 socket + 多线程） |
***
## 🧠 实战项目目标对照

| 项目名称           | 你能练到的点                   |
| -------------- | ------------------------ |
| 日志写入器          | 系统 I/O 使用 + 错误处理         |
| mini Shell 执行器 | fork/exec/wait 的完整工作流    |
| 信号终止任务服务       | 信号注册 + 控制退出流程（类似训练服务）    |
| 多线程 pipe 日志器   | 多线程数据写入 + IPC 通信         |
| 简易 HTTP 服务器    | 套接字 + 多线程通信（适合部署、边缘计算方向） |
***
## 📚 每周详细学习内容

### ✅ 第1周：文件 I/O 与目录管理

- **阅读章节**：第3章（文件I/O）、第4章（文件与目录）  
- **学习目标**：掌握 open/read/write/lseek 等系统调用，理解文件属性与权限控制。  
- **推荐重点**：
  - `open` vs `fopen` 的差异  
  - `O_APPEND` / `O_CREAT` 等标志位用法  
  - `stat`、`chmod`、`S_ISREG()` 等宏函数  
- **实战项目**：日志写入器  
  - 使用 `open/write` 写入带时间戳的日志  
  - 错误处理 + 写入失败自动重试机制  

---

### ✅ 第2周：进程控制与 Shell 模拟

- **阅读章节**：第5章（标准 I/O）、第8章（进程控制）  
- **学习目标**：掌握 `fork/exec/wait` 模型，能启动子进程并执行命令。  
- **推荐重点**：
  - `exec` 家族函数差异：`execl` vs `execvp`  
  - 父子进程地址空间与资源关系  
  - `waitpid` 的非阻塞选项  
- **实战项目**：mini Shell 执行器  
  - 用户输入命令，子进程 `exec` 执行，父进程 `wait` 等待  

---

### ✅ 第3周：信号处理与守护进程

- **阅读章节**：第10章（信号）、第13章（守护进程）  
- **学习目标**：注册信号处理函数，实现后台进程和优雅终止。  
- **推荐重点**：
  - `signal()` 与 `sigaction()` 区别与优缺点  
  - `kill/alarm/pause` 信号控制流程  
  - 守护进程的创建步骤：`fork` → `setsid` → `chdir` 等  
- **实战项目**：任务服务 + 信号终止器  
  - 子进程持续运行任务，接收 `SIGINT` 后优雅退出  

---

### ✅ 第4周：线程 + 同步 + IPC

- **阅读章节**：第11章（线程）、第12章（同步）、第14章（IPC）  
- **学习目标**：掌握 `pthread` 编程与线程同步机制，理解 `pipe`/`mmap` 等通信手段。  
- **推荐重点**：
  - `pthread_create/join` 基本线程模型  
  - `mutex` / `condition` 控制线程访问资源  
  - `pipe` / `FIFO` / `mmap` 的区别与适用场景  
- **实战项目**：线程池 + Pipe 日志系统  
  - 多线程执行任务，通过 pipe 向主线程传输结果日志  

---

### 🔄 第5周（选学）：Socket 与 mmap 通信

- **阅读章节**：第16章（套接字）、第17章（高级 IPC）  
- **学习目标**：掌握 TCP 通信流程，熟悉 `mmap` 原理，拓展部署服务能力。  
- **推荐重点**：
  - `socket/bind/listen/accept` 通信模型  
  - `select()` 多路复用与高并发应对  
  - `mmap` 页面共享与内存映射文件  
- **实战项目**：简易多线程 HTTP 文件服务器  

---

## 🎓 学完之后你将具备的能力

- 系统编程核心能力：文件/进程/线程/信号/IPC 等全流程开发经验  
- 对 PyTorch 多进程 DataLoader、训练挂起、共享内存等问题具有排查能力  
- 能使用系统级调试工具（如 `gdb`、`strace`、`valgrind`）快速定位问题  
- 能编写守护进程、训练调度器、后台日志服务等系统模块  
- 简历上可突出系统工程能力，面试中脱颖而出  
